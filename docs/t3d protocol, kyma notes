
I made a very simple format named t3d (for touch-3d).  It has three message types: frame, touch, and alive. 

The three messages are always sent in an OSC bundle consisting of a frame message, 0 or more touch messages, and an alive message. 

--

frame: 
/t3d/frm (int)frameID (int)time (int)deviceID

The frame message describes the incoming frame.  Frames are sent at a constant data rate with the exception that when new touches are detected, a new frame message is sent as soon as possible.  The data rate is typically from 100-1000Hz. 

frameID is a counter that increments for each frame of data sent by the Soundplane.  Because an extra frame is sent when a touch is detected, it may increment at a varying rate. 

time is a 31-bit timestamp in milliseconds.  As such it will wrap around to 0 every 2147.48 seconds.  This information can optionally be used to reduce jitter in a received stream.

deviceID contains a 16-bit instrument model ID followed by a 16 bit serial number. 

--

touch:
t3d/tch (int)touchID, (float)x, (float)y, (float)z, (float)note

The touch message describes a single touch currently active.  If no touches are active, there will be no touch messages sent in between the frame and alive messages. 

touchID is the touch number from 1-16.
x is the absolute x location from 0.-1.
y is the absolute y location from 0.-1.
z is the z (force) value from 0.-1.
note is a floating point value.  The Soundplane software has a utility to map from areas on the surface to zones, which may play notes.  Soundplane assumes that clients will have ways for the player to select a note to frequency map, or scale.  To provide only an equal-tempered A440 scale a fixed mapping can be used where frequency =  440.0 * 2^((note - 69.0) / 12.) .

--

alive:
/t3d/alv {(int)touchID1, (int)touchID2, ...}

The alive message ends each bundle.  The ints touchID1, touchID2... are a list of the currently active touches.  Depending on the voice allocation mode, there may be gaps in this list, for example only touches 1, 4 and 5 may be active. 
The alive message is needed to ensure that notes are not stuck on if packets are dropped over UDP.  Therefore clients must always ensure that voices not listed in the most recent alive message are turned off.

--


--Randy





Let us know if you'd like more details on any of these.  Thanks!


It's no problem to ping you with an NRPN.  I'll add this to the next version.

Great!  Thanks!  When we receive your NRPN we can set the pitchBend to +/-4 octaves and remap to velocity and timbre as needed. It would be best if you would use NRPN 0x53, 0x50 ('S', 'P' for Soundplane;) and send it on channel 16. Please send the polyphony (the maximum number of fingers you are currently tracking) as the NRPN value.

If the polyphony we receive from the Soundplane is different than the polyphony of the currently playing Kyma Sound, we can send you a MIDI message so that you could adjust the Soundplane voice allocation. If you like, we can send the polyphony value back using the same NRPN; this would give you an indication that Kyma is receiving your messages.

In order to avoid conflicts with the Paca(rana)'s processing of MotorMix messages, it would be helpful to avoid using MIDI channel 1, and use MIDI channels 2 through 16 for your note and continuous controller messages

If there are common MIDI controllers you use for velocity and timbre, let me know which ones I should use.

If you like, you could use controller 74 for KeyTimbre (the front back direction).  For pressure, you could use controller 11.

It sounds like we could make the Soundplane/Kyma connection plug-and-play over both MIDI and OSC, which would be awesome.  I've been talking to Ben about possibly bringing his Soundplane along to the Kyma symposium this fall so attendees could see it in action.

Let us know if you'd like to pursue any of this.

Thanks,

-Carla





As you can see, my app currently has almost nothing implemented. The good news is I have a lot of flexibility to take this in any direction that will make life easier for players. 
I think of the Soundplane as generating fractional note numbers. Right now there are two fixed setups for mapping keys to these numbers but in the future there will be a UI for making the maps. So this is where the equivalent of a keyboard split would happen. On the instrument end the player can decide what the note -> pitch mapping should be. 
I am glad you sent the suggestions for how to work over MIDI.  But these assume a bidirectional connection over MIDI, something I've never thought about doing before!  I guess I would have to add another device selection menu to my software.  This might be OK, as long as it save work for the player overall.  It seems like for now the player can just adjust the number of voices on my software by hand if needed, if that's the only info you need to get to me. 
We can decide on a common meaning for pitch bend in Soundplane mode. This can be +- 4 octaves. 
It's no problem to ping you with an NRPN.  I'll add this to the next version.

If there are common MIDI controllers you use for velocity and timbre, let me know which ones I should use.

--

I would like to make OSC work well if possible.  Though MIDI needs to function, I'm basically happier to put more effort into OSC.  The bidirectional thing is easier here too.  I am looking at your "About Hardware EventIDs" on the OSC protocol page.  Is there a set of these I could use that might make sense across different instrument setups?  It reads like you have a mapping layer in place here that will allow this.  I can add a Kyma mode to my software if needed. 
I would like to see a standard for multitouch instruments over OSC evolve.  I started out with the TUIO2 format which had some good ideas.  But another programmer and myself could not decide on what the spec meant, so it's probably not the greatest spec.  Also it doesn't seem to be an active project.  I am going to use some of the ideas from TUIO with a much smaller set of options and better documentation.  I'll document this in the next software I send your way soon, and I hope you can give me some feedback on it. 
-Randy



On Jul 2, 2012, at 12:31 PM, Symbolic Sound Corporation wrote:

Hi Randy,

Very nice instrument!  And fun to play (Ben you're going to love it!)

We decided to start with MIDI.  One question: we could not tell what controller number is associated with front-to-back on the surface. We saw that you could do 4ths transpositions, but could not see if there was a controller showing the continuous front-back position?

It looks like the simplest and fastest way to get the Soundplane working seamlessly with Kyma is going to be through MIDI.

Could you send us a sysex or nrpn over MIDI to notify us that a Soundplane is hooked up?  We could respond with a message telling you the polyphony of the currently loaded instrument.(If you want to implement keyboard splits, we could also respond with pitch ranges). You could use the polyphony number to limit the number of MIDI channels that you send (and we would pay attention only to the first N of them).

Once you know you are in "Kyma mode" you could also set the pitch bend to the largest allowable range. Is it 2.5 octaves?  We would need to know what the pitchBend range is so you could either send it in a nrpn or we can just expect it to be at its maximum so people can do a full range glissando.

However we decide to send the ID message, it should be sent periodically (every few seconds should be fine). If you do not receive an answer from us, you could stop sending that ID message (or you could have a Kyma-mode in your Soundplane setup software).

In Soundplane mode we would re-map channel pressure to !KeyVelocity and your front-back controller number to !KeyTimbre. This would make all of our existing Keyboard-controlled Sounds in the library work instantly(!)


with at least a few apps out there.  The Max patch shows how to decode the messages.  If you would like some additional or additionally massaged data

We don't have a copy of Max.

The best way to get the SoundPlane communicating with Kyma using OSC would be to use our published OSC protocol:
> http://www.symbolicsound.com/Learn/OpenSoundControlImplementation

Ben, would you be interested in writing an application to run on the Mac and re-package Soundplane OSC messages and forward them to the Pacarana?

Alternatively Delora software might be interested in taking this on (they have a lot of experience with the Symbolic Sound protocol). Let me know if you'd like me to ask them if they might be interested.

Otherwise, Ben could use OOsculator or Max to receive OSC from your Max patch and re-map it to what Kyma expects.

It seems like MIDI might be easier from your side of things, but OSC would give you much higher resolution and might be best in the long run.

Thanks!

Carla



Hi Carla,

The hardware forums at http://www.madronalabs.com/forums have sticky links to a manual, a Max patch, and a client application.
>>
All these things are in the very early stages of development! Probably the OSC output from the client app will be the best way for you to go forward, for now.
The OSC messages it sends are in the TUIO2 format.  I picked this because it was a decent existing format for multi-touch data, and should be compatible with at least a few apps out there.  The Max patch shows how to decode the messages.  If you would like some additional or additionally massaged data sent from the client, I can probably do that.
If you're more interested in IAC midi, I can help you with that too.

best,
Randy




On Jun 26, 2012, at 8:39 AM, Symbolic Sound Corporation wrote:

Hi Randy,

Soundplane arrived this morning.  Beautiful instrument!  Very nice packaging as well.

Is there a link to a manual and setup info?

Thanks!

-Carla



Hi Symbolic Sound,

Thanks to Ben, I'm happy to be sending you a Soundplane Model A next week for any work you would like to do with Kyma compatibility.  I have a client app that connects to the Soundplane and provides both OSC and MIDI data, so I'm sure we can come up with something useful without too much work.  If it makes sense to roll code into your world somehow that talks to the Soundplane directly, we can also do that.  I'll be in touch with more info.
>>
all the best,
Randy Jones



On Jun 13, 2012, at 12:35 PM, Ben Phenix wrote:

Randy, here is the shipping info for SSC.

Symbolic Sound Corporation
206 North Randolph St, Suite 520
Champaign, IL  61820

SSC phone number is:  217.355.6273

---

Kurt & Carla, this is Randy, the designer & developer of the Madrona Soundplane.  The Soundplane should arrive sometime next week.
Cheers,

Ben.



On Jun 13, 2012, at 2:05 PM, Randy Jones wrote:


Dear customers,

I expect to mail your Soundplane to you via UPS Ground on Monday, June 18.  Please send me the address you would like it shipped to.  I'm happy to offer you free shipping within the USA.  If your address is elsewhere, I will email you back with a shipping cost that I will collect via PayPal before shipping.  I can also charge your UPS account if you provide one.

-Randy





--
====================================
|                Symbolic Sound Corporation			|
|      P. O. Box 2549 * Champaign, IL 61825-2549 * USA	|
|         Tel: +1-217-355-6273 * Fax: +1-217-355-6562	|
|            Email:  symsound@SymbolicSound.com		|
|            URL:  http://www.SymbolicSound.com		|
====================================


--
====================================
|                Symbolic Sound Corporation			|
|      P. O. Box 2549 * Champaign, IL 61825-2549 * USA	|
|         Tel: +1-217-355-6273 * Fax: +1-217-355-6562	|
|            Email:  symsound@SymbolicSound.com		|
|            URL:  http://www.SymbolicSound.com		|
====================================


-- 
====================================
|                Symbolic Sound Corporation			|
|      P. O. Box 2549 * Champaign, IL 61825-2549 * USA	|
|         Tel: +1-217-355-6273 * Fax: +1-217-355-6562	|
|            Email:  symsound@SymbolicSound.com		|
|            URL:  http://www.SymbolicSound.com		|
====================================
